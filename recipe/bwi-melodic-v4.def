BootStrap: docker
From: tacc/tacc-ubuntu18-mvapich2.3-ib:latest

%labels

%help
    Test with ros-melodic installation
%files

%post
    export ROS_DISTRO=melodic
    export DEBIAN_FRONTEND=noninteractive

    apt-get update && apt-get install -y gnupg apt-utils curl nano vim tmux python-pip
    echo 'deb http://packages.ros.org/ros/ubuntu bionic main' > /etc/apt/sources.list.d/ros-latest.list
    curl -s https://raw.githubusercontent.com/ros/rosdistro/master/ros.asc | apt-key add -

    apt-get update
    apt-get install -y ros-${ROS_DISTRO}-desktop-full python-rosdep python-rosinstall python-rosinstall-generator \
                       python-wstool build-essential python-catkin-tools libqt5websockets5-dev qt5-default
    pip install -U pyYAML
    rosdep init

%environment
    # ros
    export ROS_HOSTNAME=localhost
    export ROS_MASTER_URI=http://localhost:11311